1:"$Sreact.fragment"
2:I[2947,["933","static/chunks/c857e369-7d101bd487d2337f.js","545","static/chunks/c16f53c3-046ed8a6addafdf8.js","874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","95","static/chunks/95-4fad12d9cc13c226.js","177","static/chunks/app/layout-ff2fd5cadd172093.js"],"RegisterAnalytics"]
3:I[446,["933","static/chunks/c857e369-7d101bd487d2337f.js","545","static/chunks/c16f53c3-046ed8a6addafdf8.js","874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","95","static/chunks/95-4fad12d9cc13c226.js","177","static/chunks/app/layout-ff2fd5cadd172093.js"],"ThemeProviders"]
4:I[9243,["933","static/chunks/c857e369-7d101bd487d2337f.js","545","static/chunks/c16f53c3-046ed8a6addafdf8.js","874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","95","static/chunks/95-4fad12d9cc13c226.js","177","static/chunks/app/layout-ff2fd5cadd172093.js"],""]
5:I[7392,["933","static/chunks/c857e369-7d101bd487d2337f.js","545","static/chunks/c16f53c3-046ed8a6addafdf8.js","874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","95","static/chunks/95-4fad12d9cc13c226.js","177","static/chunks/app/layout-ff2fd5cadd172093.js"],"KBarSearchProvider"]
6:I[6874,["874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","125","static/chunks/125-c2ed6da5ddd68675.js","156","static/chunks/app/posts/%5B...slug%5D/page-ef17fb7a9c85ad38.js"],""]
7:I[3063,["874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","125","static/chunks/125-c2ed6da5ddd68675.js","156","static/chunks/app/posts/%5B...slug%5D/page-ef17fb7a9c85ad38.js"],"Image"]
8:I[4159,["933","static/chunks/c857e369-7d101bd487d2337f.js","545","static/chunks/c16f53c3-046ed8a6addafdf8.js","874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","95","static/chunks/95-4fad12d9cc13c226.js","177","static/chunks/app/layout-ff2fd5cadd172093.js"],"KBarButton"]
9:I[7773,["933","static/chunks/c857e369-7d101bd487d2337f.js","545","static/chunks/c16f53c3-046ed8a6addafdf8.js","874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","95","static/chunks/95-4fad12d9cc13c226.js","177","static/chunks/app/layout-ff2fd5cadd172093.js"],"default"]
a:I[7555,[],""]
b:I[1295,[],""]
d:I[9665,[],"OutletBoundary"]
10:I[9665,[],"ViewportBoundary"]
12:I[9665,[],"MetadataBoundary"]
14:I[6614,[],""]
:HL["/_next/static/media/e4af272ccee01ff0-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/991d5e3381d79286.css","style"]
:HL["/_next/static/css/37f456282b5838dd.css","style"]
:HL["/_next/static/css/a821df72551a909a.css","style"]
:HL["/_next/static/css/252e266d7553d403.css","style"]
0:{"P":null,"b":"1BwZgqfUYTtgoqMPsv7XY","p":"","c":["","posts","smashing-out-a-build-and-deploy-pipeline-using-teamcity"],"i":false,"f":[[["",{"children":["posts",{"children":[["slug","smashing-out-a-build-and-deploy-pipeline-using-teamcity","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/991d5e3381d79286.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/37f456282b5838dd.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en-us","className":"__variable_93ed5b scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon-76x76.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/apple-touch-icon-57x57.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/apple-touch-icon-57x57.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","link",null,{"rel":"mask-icon","href":"/static/favicons/apple-touch-icon-120x120.png","color":"#10984d"}],["$","meta",null,{"name":"google-adsense-account","content":"ca-pub-4666761687967451"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#10984d"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#10984d"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#10984d"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"bg-white text-black antialiased dark:bg-gray-950 dark:text-white","children":[["$","script",null,{"async":true,"src":"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4666761687967451","crossOrigin":"anonymous"}],["$","$L2",null,{}],["$","$L3",null,{"children":[["$undefined",[["$","$L4",null,{"strategy":"lazyOnload","id":"sa-script","children":"\n            window.sa_event=window.sa_event||function(){var a=[].slice.call(arguments);window.sa_event.q?window.sa_event.q.push(a):window.sa_event.q=[a]};\n        "}],["$","$L4",null,{"strategy":"lazyOnload","src":"https://scripts.simpleanalyticscdn.com/latest.js"}]],"$undefined","$undefined","$undefined","$undefined"],["$","$L5",null,{"kbarConfig":{"searchDocumentsPath":"/search.json"},"children":[["$","header",null,{"className":"border-t-primary-500 sticky top-0 z-50 flex h-14 w-full items-center justify-between border-t-4 bg-white/95 px-8 py-4 backdrop-blur-lg dark:bg-gray-950","children":[["$","$L6",null,{"className":"break-words","href":"/","aria-label":"Clyde's Blog","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","$L7",null,{"src":"/static/images/clydedsouza.jpg","width":35,"height":35,"style":{"borderRadius":"100px"},"priority":true,"alt":"Picture of the author"}]}],["$","div",null,{"className":"hidden text-xl font-semibold md:block","children":"Clyde's Blog"}]]}]}],["$","div",null,{"className":"flex items-center space-x-4 leading-5 sm:-mr-6 sm:space-x-6","children":[["$","$L8",null,{"aria-label":"Search","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","className":"hover:text-primary-500 dark:hover:text-primary-400 h-6 w-6 text-gray-900 dark:text-gray-100","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}]}]}],["$","div",null,{"className":"no-scrollbar hidden max-w-80 items-center gap-x-4 overflow-x-auto sm:flex md:max-w-72 lg:max-w-96","children":[["$","$L6","All posts",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 text-sm font-medium text-gray-900 dark:text-gray-100","href":"/posts","children":"All posts"}],["$","$L6","Reading lists",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 text-sm font-medium text-gray-900 dark:text-gray-100","href":"/lists","children":"Reading lists"}],["$","$L6","Tags",{"className":"hover:text-primary-500 dark:hover:text-primary-400 m-1 text-sm font-medium text-gray-900 dark:text-gray-100","href":"/tags","children":"Tags"}]]}],["$","a",null,{"className":"flex items-center justify-center gap-4 rounded-full bg-black px-2 py-1 text-sm text-white transition-colors duration-200 hover:bg-teal-500 focus:bg-teal-500 sm:px-4 sm:py-2 dark:bg-teal-500 dark:hover:bg-black dark:focus:bg-black","target":"_blank","rel":"noopener noreferrer","href":"https://clydedsouza.net","children":["$","span",null,{"className":"whitespace-nowrap","children":"Visit my website"}]}],false,["$","$L9",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","section",null,{"className":"mx-auto max-w-7xl px-2 sm:px-6 xl:max-w-7xl xl:px-0","children":[["$","h1",null,{"className":"py-6 text-5xl font-extrabold tracking-tight text-gray-900 sm:text-5xl sm:leading-10 md:text-5xl md:leading-14 dark:text-gray-100","children":"Sorry, this page doesn't exist."}],["$","div",null,{"className":"flex w-full flex-wrap","children":"Try heading to the homepage for a fresh start or using the search above to look for content."}],["$","div",null,{"className":"my-6 flex w-full flex-wrap","children":["$","$L6",null,{"className":"bg-primary-500 flex items-center justify-center gap-4 rounded-full px-4 py-2 text-white transition-colors duration-200 hover:bg-slate-800 focus:bg-slate-800 sm:px-8 sm:py-2","href":"/","children":"Back to homepage"}]}]]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-6 flex flex-col items-center","children":[["$","div",null,{"className":"mb-3 flex space-x-4","children":[["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"mailto:clyde@clydedsouza.net","children":[["$","span",null,{"className":"sr-only","children":"mail"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 20 20","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Mail"}],["$","path",null,{"d":"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}],["$","path",null,{"d":"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/ClydeDz","children":[["$","span",null,{"className":"sr-only","children":"github"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"GitHub"}],["$","path",null,{"d":"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}]]}]]}],null,["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://www.youtube.com/@clydedz","children":[["$","span",null,{"className":"sr-only","children":"youtube"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Youtube"}],["$","path",null,{"d":"M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://www.linkedin.com/in/clydedz/","children":[["$","span",null,{"className":"sr-only","children":"linkedin"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Linkedin"}],["$","path",null,{"d":"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"}]]}]]}],null,null,["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://twitter.com/clydedz","children":[["$","span",null,{"className":"sr-only","children":"x"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"X"}],["$","path",null,{"d":"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"}]]}]]}],null,null,null]}],["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":["Copyright ©"," ",["$","a",null,{"className":"hover:text-primary-500 cursor-pointer hover:underline","target":"_blank","rel":"noopener noreferrer","href":"https://clydedsouza.net","children":"Clyde D'Souza"}]," ",2025,"."]}],["$","div",null,{"children":"All rights reserved."}]]}],["$","div",null,{"className":"mb-8 text-sm text-gray-500 dark:text-gray-400","children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/timlrx/tailwind-nextjs-starter-blog","children":"Thanks to this blog theme"}]}]]}]}]]}]]}]]}]]}],{"children":["posts",["$","$1","c",{"children":[null,["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","smashing-out-a-build-and-deploy-pipeline-using-teamcity","c"],["$","$1","c",{"children":[null,["$","$La",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$Lb",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$Lc","$undefined",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/a821df72551a909a.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/252e266d7553d403.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$Ld",null,{"children":["$Le","$Lf",null]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","D0oUinEbigPepK1VcgkZX",{"children":[["$","$L10",null,{"children":"$L11"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$L12",null,{"children":"$L13"}]]}],false]],"m":"$undefined","G":["$14","$undefined"],"s":false,"S":true}
15:I[3428,["874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","125","static/chunks/125-c2ed6da5ddd68675.js","156","static/chunks/app/posts/%5B...slug%5D/page-ef17fb7a9c85ad38.js"],"default"]
16:I[1130,["874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","125","static/chunks/125-c2ed6da5ddd68675.js","156","static/chunks/app/posts/%5B...slug%5D/page-ef17fb7a9c85ad38.js"],"PostHeader"]
17:I[1954,["874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","125","static/chunks/125-c2ed6da5ddd68675.js","156","static/chunks/app/posts/%5B...slug%5D/page-ef17fb7a9c85ad38.js"],"default"]
18:I[3926,["874","static/chunks/874-410420491a8cc9ea.js","63","static/chunks/63-e69e22ad2a5ac117.js","125","static/chunks/125-c2ed6da5ddd68675.js","156","static/chunks/app/posts/%5B...slug%5D/page-ef17fb7a9c85ad38.js"],"PostAside"]
c:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Smashing Out a Build and Deploy Pipeline Using TeamCity\",\"datePublished\":\"2023-03-30T00:00:00.000Z\",\"dateModified\":\"2023-03-30T00:00:00.000Z\",\"description\":\"React JS + Azure Storage and CLI + Lots of TeamCity GUI\",\"image\":\"/static/posts/tcman.png\",\"url\":\"https://blog.clydedsouza.net/posts/smashing-out-a-build-and-deploy-pipeline-using-teamcity\",\"author\":[{\"@type\":\"Person\",\"name\":\"Clyde D'Souza\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-7xl px-2 sm:px-6 xl:max-w-7xl xl:px-0","children":[["$","$L15",null,{}],["$","article",null,{"className":"xl:dark:divide-gray-700","children":[["$","$L16",null,{"content":{"title":"Smashing Out a Build and Deploy Pipeline Using TeamCity","date":"2023-03-30T00:00:00.000Z","tags":["TeamCity","Continuous Integration","Continuous Delivery","DevOps","CICD"],"readingList":["TeamCity"],"lastmod":"2023-03-30T00:00:00.000Z","draft":false,"subtitle":"React JS + Azure Storage and CLI + Lots of TeamCity GUI","images":["/static/posts/tcman.png"],"type":"Blog","readingTime":{"text":"14 min read","minutes":13.395,"time":803700,"words":2679},"slug":"smashing-out-a-build-and-deploy-pipeline-using-teamcity","path":"posts/smashing-out-a-build-and-deploy-pipeline-using-teamcity","filePath":"posts/smashing-out-a-build-and-deploy-pipeline-using-teamcity.mdx","toc":[{"value":"Introduction","url":"#introduction","depth":3},{"value":"Prerequisites","url":"#prerequisites","depth":3},{"value":"React website code on GitHub","url":"#react-website-code-on-github","depth":4},{"value":"Azure configurations","url":"#azure-configurations","depth":4},{"value":"TeamCity deep-dive","url":"#teamcity-deep-dive","depth":3},{"value":"Creating a new project","url":"#creating-a-new-project","depth":4},{"value":"Build configuration","url":"#build-configuration","depth":4},{"value":"Build step #1: Install packages","url":"#build-step-1-install-packages","depth":4},{"value":"Build step #2: Build the project","url":"#build-step-2-build-the-project","depth":4},{"value":"Build step #3: Run tests","url":"#build-step-3-run-tests","depth":4},{"value":"Build settings","url":"#build-settings","depth":4},{"value":"Optimizing the build configuration","url":"#optimizing-the-build-configuration","depth":4},{"value":"Notifying GitHub","url":"#notifying-github","depth":4},{"value":"Deployment configuration","url":"#deployment-configuration","depth":4},{"value":"Deploy settings","url":"#deploy-settings","depth":4},{"value":"What triggers this deployment?","url":"#what-triggers-this-deployment","depth":4},{"value":"Artifact dependency","url":"#artifact-dependency","depth":4},{"value":"Secrets and variables","url":"#secrets-and-variables","depth":4},{"value":"Build steps","url":"#build-steps","depth":4},{"value":"Deploy step #1: Log in to Azure","url":"#deploy-step-1-log-in-to-azure","depth":4},{"value":"Deploy step #2: Upload website files","url":"#deploy-step-2-upload-website-files","depth":4},{"value":"Deploy step #3: Log out of Azure","url":"#deploy-step-3-log-out-of-azure","depth":4},{"value":"Test it out","url":"#test-it-out","depth":4},{"value":"Viewing the build chain","url":"#viewing-the-build-chain","depth":4},{"value":"Conclusion","url":"#conclusion","depth":3}],"structuredData":{"@context":"https://schema.org","@type":"BlogPosting","headline":"Smashing Out a Build and Deploy Pipeline Using TeamCity","datePublished":"2023-03-30T00:00:00.000Z","dateModified":"2023-03-30T00:00:00.000Z","description":"React JS + Azure Storage and CLI + Lots of TeamCity GUI","image":"/static/posts/tcman.png","url":"https://blog.clydedsouza.net/posts/smashing-out-a-build-and-deploy-pipeline-using-teamcity","author":[{"@type":"Person","name":"Clyde D'Souza"}]}}}],["$","div",null,{"className":"grid-rows-[auto_1fr] pb-8 xl:grid xl:grid-cols-4 xl:gap-x-6","children":[["$","div",null,{"className":"pt-2 xl:col-span-3 xl:row-span-2 xl:pb-0","children":[["$","div",null,{"className":"prose dark:prose-invert max-w-none pb-8","children":[["$","figure",null,{"className":"mb-2","children":[["$","$L7",null,{"src":"/static/posts/tcman.png","alt":"TeamCity logo over an image from Unsplash.","className":"mb-0 aspect-16/9 object-cover pb-1","height":536.63,"width":954}],["$","figcaption",null,{"children":["$","center",null,{"children":["Image source: TeamCity logo over an image from"," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://unsplash.com/photos/dnIiFLgmg6U","children":"Unsplash"}]]}]}]]}],["$","h3",null,{"className":"content-header mt-8 mb-6","id":"introduction","children":[["$","a",null,{"className":"break-words","href":"#introduction","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Introduction"]}],["$","p",null,{"children":"Learning TeamCity can be challenging so I'd recommend learning the UI before moving into Kotlin, which is a programmatic way to create the TeamCity pipeline. This article demonstrates the use of the TeamCity user interface to create a build and deployment pipeline to build a React website and deploy it to an Azure blob storage account."}],["$","hr",null,{}],["$","h3",null,{"className":"content-header mt-8 mb-6","id":"prerequisites","children":[["$","a",null,{"className":"break-words","href":"#prerequisites","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Prerequisites"]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"react-website-code-on-github","children":[["$","a",null,{"className":"break-words","href":"#react-website-code-on-github","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"React website code on GitHub"]}],["$","p",null,{"children":["You'll need a sample React app if you're following along. Feel free to fork",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/ClydeDz/create-react-app-teamcity-demo","children":" this GitHub repository"}]," or create your very own React app in a GitHub repository."]}],["$","p",null,{"children":["You may also need to create a personal access token in GitHub and have that value handy so that your TeamCity pipeline can connect to the GitHub repository if your GitHub repository isn't accessible without a password. Head over to the ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/settings/personal-access-tokens/new","children":"personal access tokens page"}]," on GitHub, fill up the metadata, select a repository that you want to link with this token, and then finally, under the ",["$","strong",null,{"children":"Repository permissions"}]," section, select ",["$","strong",null,{"children":"Read and write"}]," permissions for ",["$","strong",null,{"children":"Commit statuses"}]," and ",["$","strong",null,{"children":"Contents"}],". You can always fine-tune this later."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_XbKOxmwnwhYg98eqE8ufvA.png","alt":"","width":"1404","height":"635"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"azure-configurations","children":[["$","a",null,{"className":"break-words","href":"#azure-configurations","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Azure configurations"]}],["$","p",null,{"children":"If you're following along, you may need an Azure account to be able to deploy the React website to Azure blob storage. Once you have that sorted, you can jump back into the command line to take it away from there."}],["$","p",null,{"children":["Let's install the Azure CLI on your computer so that you can run some Azure commands. Follow ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://learn.microsoft.com/en-us/cli/azure/install-azure-cli","children":"these steps"}]," to install the CLI on your Windows, Mac, or Linux device."]}],["$","p",null,{"children":["Next, run ",["$","code",null,{"children":"az login"}]," to log in to your Azure account from your CLI. You'll now need the subscription ID, so run ",["$","code",null,{"children":"az account list"}]," to get a list of subscriptions for the logged-in account and copy the active subscription ID."]}],["$","p",null,{"children":["A resource group is like a container that holds various Azure resources. We'll need to create one to hold our storage account by using the command ",["$","code",null,{"children":"az group create -l westus -n <RESOURCE GROUP NAME> --subscription <SUBSCRIPTION ID>"}],". Replace ",["$","code",null,{"children":"<SUBSCRIPTION ID>"}]," with the ID you copied earlier and ",["$","code",null,{"children":"<RESOURCE GROUP NAME>"}]," with a suitable name of your choice."]}],["$","p",null,{"children":["We'll now go ahead and create the storage account using the command ",["$","code",null,{"children":"az storage account create -n <STORAGE ACCOUNT NAME> -g <RESOURCE GROUP NAME> -l westus --sku Standard_LRS"}],". Replace ",["$","code",null,{"children":"<STORAGE ACCOUNT NAME>"}]," with a suitable name and ",["$","code",null,{"children":"<RESOURCE GROUP NAME>"}]," with the resource group name from above. We'll also need to update the storage account configuration slightly to get the storage account to serve a website and also set the error page and starting index page using the command ",["$","code",null,{"children":"az storage blob service-properties update --account-name <STORAGE ACCOUNT NAME> --static-website true --404-document error.html --index-document index.html"}],"."]}],["$","p",null,{"children":["Finally, we'll need to create a service principal which will allow us to use credentials to log in to the Azure account from the TeamCity pipeline later. We'll run this command ",["$","code",null,{"children":"az ad sp create-for-rbac --name “<SERVICE PRINCIPAL NAME>” --sdk-auth --role “Storage Blob Data Contributor” --scopes /subscriptions/<SUBSCRIPTION ID>/resourceGroups/<RESOURCE GROUP NAME>"}]," and replace ",["$","code",null,{"children":"<SERVICE PRINCIPAL NAME>"}]," with a suitable name, ",["$","code",null,{"children":"<SUBSCRIPTION ID>"}]," with the subscription ID copied from before and ",["$","code",null,{"children":"<RESOURCE GROUP NAME>"}]," with the resource group name created before."]}],["$","p",null,{"children":["Running the command will return the credentials. Save the ",["$","code",null,{"children":"clientId"}],", ",["$","code",null,{"children":"clientSecret"}]," and ",["$","code",null,{"children":"tenantId"}]," which we'll save for future use."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_lYmB0XmCDjUZyehd8VYflA.png","alt":"Output of the command line.","width":"1218","height":"313"}]}]}],["$","p",null,{"children":["If you need the tenant name, you can get that straightaway from the URL. It'll be in the format ",["$","code",null,{"children":"@example.onmicrosoft.com"}],"."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_DkmbiS3az1HDEavWfhb5PQ.png","alt":"","width":"797","height":"128"}]}]}],["$","hr",null,{}],["$","h3",null,{"className":"content-header mt-8 mb-6","id":"teamcity-deep-dive","children":[["$","a",null,{"className":"break-words","href":"#teamcity-deep-dive","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"TeamCity deep-dive"]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"creating-a-new-project","children":[["$","a",null,{"className":"break-words","href":"#creating-a-new-project","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Creating a new project"]}],["$","p",null,{"children":["Head over to the ",["$","strong",null,{"children":"Projects"}]," navigation tab in TeamCity and click on the ",["$","strong",null,{"children":"New project"}]," button located on the top-right of the screen."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_vuDJFiDEvqgMSTJdQLoXLA.png","alt":"Creating a new project in TeamCity.","width":"1284","height":"183"}]}]}],["$","p",null,{"children":["In the ",["$","strong",null,{"children":"Create Project"}]," screen, enter the required details in the respective fields. Usually, you would create a project under the root project. However, if hierarchically organized, it makes sense to place this project under another existing project and select a different one from the ",["$","strong",null,{"children":"Parent project"}]," dropdown. Here, the ",["$","strong",null,{"children":"Password/access token"}]," is the personal access token you would've created earlier. If it's a public repository, you may not require a password/access token. Click on the ",["$","strong",null,{"children":"Proceed"}]," button once everything has been entered."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_3P2CqRG0mTwRb0BpC45F0w.png","alt":"Creating a new project in TeamCity — configuration required to be saved.","width":"724","height":"498"}]}]}],["$","p",null,{"children":["If the connection to GitHub was successful, you'll see a success message with a few other fields to configure the branch specifications. We'll leave this as the default for now and click on the ",["$","strong",null,{"children":"Proceed"}]," button."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_D7LjqXFyleB3DVsoOzQc_w.png","alt":"","width":"682","height":"514"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"build-configuration","children":[["$","a",null,{"className":"break-words","href":"#build-configuration","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Build configuration"]}],["$","p",null,{"children":"Now that we've created a project, we'll need to configure the actual steps that will run once our pipeline is triggered. These steps will be responsible for building our application and then deploying it."}],["$","p",null,{"children":["Click on the configure ",["$","strong",null,{"children":"build steps manually"}]," link from the ",["$","strong",null,{"children":"Build Steps"}]," page."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_lNLK5ioZD0f4dBcnh-2nCg.png","alt":"","width":"1280","height":"527"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"build-step-1-install-packages","children":[["$","a",null,{"className":"break-words","href":"#build-step-1-install-packages","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Build step #1: Install packages"]}],["$","p",null,{"children":["We want to first install the required npm packages for the project, similar to what you'd do when you first clone a project on your machine. We've selected the ",["$","strong",null,{"children":"Runner type"}]," to be ",["$","strong",null,{"children":"Command Line"}]," so that we can write the commands ourselves."]}],["$","p",null,{"children":["In the ",["$","strong",null,{"children":"Custom script"}]," section, we'll enter ",["$","code",null,{"children":"npm ci"}],". Running this command should install the required npm packages. In the ",["$","strong",null,{"children":"Step name"}]," field, you can provide a descriptive name for this step as this text is what will appear in the UI later. Finally, click on the ",["$","strong",null,{"children":"Save"}]," button to save this step."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_XzGtn59G-5Kzbqu3f1pYHQ.png","alt":"","width":"479","height":"549"}]}]}],["$","p",null,{"children":"Similarly, let's add two more build steps."}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"build-step-2-build-the-project","children":[["$","a",null,{"className":"break-words","href":"#build-step-2-build-the-project","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Build step #2: Build the project"]}],["$","p",null,{"children":["Follow the same process as above but this time, write the command ",["$","code",null,{"children":"npm run build"}],". This will build the project and generate the output files. These output files are what need to be deployed for the website to be running, which we'll do very soon."]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"build-step-3-run-tests","children":[["$","a",null,{"className":"break-words","href":"#build-step-3-run-tests","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Build step #3: Run tests"]}],["$","p",null,{"children":["Repeat the steps again to add another command line build step and this time, write the command ",["$","code",null,{"children":"set CI=true&&npm test"}],". We want to ensure that we run all the unit tests that are written as part of our project so that the quality of our website is maintained. We're prefixing the command ",["$","code",null,{"children":"CI=true"}]," so that the tests don't default to run in watch mode."]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"build-settings","children":[["$","a",null,{"className":"break-words","href":"#build-settings","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Build settings"]}],["$","p",null,{"children":["Now that we have the required three steps, let's go to the ",["$","strong",null,{"children":"General Settings"}]," page and set the ",["$","strong",null,{"children":"Artifact paths"}]," to the ",["$","code",null,{"children":"build"}]," folder. This is because the ",["$","code",null,{"children":"npm run build"}]," step configured above generates the output files in the ",["$","code",null,{"children":"build"}]," folder and we want our build configuration to expose the generated files as build artifacts so that the deployment configuration can use them ahead."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_X2NTHM9JTF8o4CRPo7OVnw.png","alt":"","width":"927","height":"571"}]}]}],["$","p",null,{"children":["Click on the ",["$","strong",null,{"children":"Save"}]," button and then click on the ",["$","strong",null,{"children":"Run"}]," button to test the build configuration. This will execute all three build steps we configured above."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_BZ34jkOVFRW6Jl9MrZjNbw.png","alt":"","width":"1267","height":"118"}]}]}],["$","p",null,{"children":["If you click into a build that's completed, and then click on the ",["$","strong",null,{"children":"Build Log"}]," tab, you should see the logs generated from each build step and even the other entry and exit logs."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_dQJXkMPqhySOEjTBLQMSyg.png","alt":"","width":"992","height":"551"}]}]}],["$","p",null,{"children":["If you click on the ",["$","strong",null,{"children":"Artifacts"}]," tab, you should see the generated website files. This confirms that our build configuration has run successfully."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_g5jruvyc_9uIeqZ3Q0c-Fg.png","alt":"","width":"973","height":"416"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"optimizing-the-build-configuration","children":[["$","a",null,{"className":"break-words","href":"#optimizing-the-build-configuration","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Optimizing the build configuration"]}],["$","p",null,{"children":["If we click on the ",["$","strong",null,{"children":"Triggers"}]," page and then click on the ",["$","strong",null,{"children":"Edit"}]," link against the VCS Trigger, we can configure ",["$","strong",null,{"children":"Per-checkin Triggering"}]," or in other words, batch triggering. Let's say you push multiple check-ins to the remote branch, you may not want each of those commits to run a separate build. Instead, you'd want the last check-in to run the build configuration."]}],["$","p",null,{"children":["To enable this behavior, we'll check both boxes in the ",["$","strong",null,{"children":"Per-checkin Triggering"}]," section and then click on ",["$","strong",null,{"children":"Save"}],"."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_63IoNkCQUBfIGxIZaVwEKw.png","alt":"","width":"1277","height":"563"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"notifying-github","children":[["$","a",null,{"className":"break-words","href":"#notifying-github","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Notifying GitHub"]}],["$","p",null,{"children":["Next, we'll add a step so that TeamCity notifies GitHub of the outcome of the build configuration. Let's click on ",["$","strong",null,{"children":"Build Features"}]," and then click on the ",["$","strong",null,{"children":"Add build feature"}]," button. We'll configure TeamCity to update the pull requests in GitHub with the status of the build and also update the status against the commit that triggered the build."]}],["$","p",null,{"children":["In the modal that pops up, select the ",["$","strong",null,{"children":"Pull Requests"}]," build feature from the dropdown. ",["$","strong",null,{"children":"VCS Root"}]," will be the same GitHub repository we configured earlier so the access token will also be the same that needs to be entered here. Click on ",["$","strong",null,{"children":"Save"}]," to save these changes."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_2vVeYw8zhaj8GEjTbacUlQ.png","alt":"","width":"1152","height":"669"}]}]}],["$","p",null,{"children":["Similarly, repeat the steps but this time, select the ",["$","strong",null,{"children":"Commit status publisher"}]," build feature, enter the access token, and then click on ",["$","strong",null,{"children":"Save"}]," to add this configuration to the mix."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_NjpohLUoxCuYT1nOkTQnIg.png","alt":"","width":"1185","height":"535"}]}]}],["$","p",null,{"children":["If you now run the build configuration once again by clicking on the ",["$","strong",null,{"children":"Run"}]," button as we did earlier, and then upon a successful build, head over to GitHub, you should see an update from TeamCity in the pull request and also in the commit history."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_4N9qLg94LdLCF9wOIsxElQ.png","alt":"","width":"924","height":"281"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"deployment-configuration","children":[["$","a",null,{"className":"break-words","href":"#deployment-configuration","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Deployment configuration"]}],["$","p",null,{"children":["Let's head back to TeamCity and click on the ",["$","strong",null,{"children":"New build configuration"}]," button to add the deployment step."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_hbr8t1e8rNF3Kr8inn0TNw.png","alt":"","width":"1097","height":"237"}]}]}],["$","p",null,{"children":["The build configuration page is quite similar to the one we did earlier and so are the values for the parent project, GitHub URL, GitHub username, and access token. The difference would be the ",["$","strong",null,{"children":"Build configuration name"}]," which we'll set to ",["$","strong",null,{"children":"Deploy"}],"."]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"deploy-settings","children":[["$","a",null,{"className":"break-words","href":"#deploy-settings","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Deploy settings"]}],["$","p",null,{"children":["From the ",["$","strong",null,{"children":"General Settings"}]," page, we'll configure the Build configuration type to ",["$","strong",null,{"children":"Deployment"}],"."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_YaJfzdShjG9ikUgB2w_Fkw.png","alt":"","width":"805","height":"308"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"what-triggers-this-deployment","children":[["$","a",null,{"className":"break-words","href":"#what-triggers-this-deployment","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"What triggers this deployment?"]}],["$","p",null,{"children":["From the ",["$","strong",null,{"children":"Triggers"}]," page, we'll delete the default ",["$","strong",null,{"children":"VCS Trigger"}]," by clicking the dropdown beside it and then the ",["$","strong",null,{"children":"Delete"}]," button from the popup. The reason is that we don't want a code check-in to trigger the deployment steps. Instead, we want a successful build to trigger it."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_2uN65RLRZT5ShIsszDO61A.png","alt":"","width":"1283","height":"428"}]}]}],["$","p",null,{"children":["While still on the ",["$","strong",null,{"children":"Triggers"}]," page, we'll click on the ",["$","strong",null,{"children":"Add new trigger"}]," button, and then from the ",["$","strong",null,{"children":"Finish Build Trigger"}]," modal, we'll ensure that the checkbox is checked to trigger the configuration after a successful build only and the dependent build configuration is selected as ",["$","strong",null,{"children":"Build"}],", which is what we configured and tested earlier in this article. We'll also leave the branch filters as-is to ",["$","code",null,{"children":"main"}],". Click on the ",["$","strong",null,{"children":"Save"}]," button to save these changes."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_5MW8j0sitZsN0iKSAvipkw.png","alt":"","width":"1002","height":"554"}]}]}],["$","p",null,{"children":["From the ",["$","strong",null,{"children":"Dependencies"}]," page, let's click on the ",["$","strong",null,{"children":"Add new snapshot dependency"}]," button."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_3ZMWOPiFdw2KfS_1lzDvQw.png","alt":"","width":"658","height":"414"}]}]}],["$","p",null,{"children":["Our deploy configuration is dependent on the ",["$","strong",null,{"children":"Build"}]," configuration, so let's select that. The remaining settings should already be defaulted to what you see in the screenshot below. Click on the ",["$","strong",null,{"children":"Save"}]," button to save these changes."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_jhjqLS7V5aSLSq2rSoAMBg.png","alt":"","width":"545","height":"439"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"artifact-dependency","children":[["$","a",null,{"className":"break-words","href":"#artifact-dependency","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Artifact dependency"]}],["$","p",null,{"children":["While still on the ",["$","strong",null,{"children":"Dependencies"}]," page, click on the ",["$","strong",null,{"children":"Add new artifact dependency"}]," button."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_DpJl5t1eHcYfVHevA-gRzg.png","alt":"","width":"658","height":"414"}]}]}],["$","p",null,{"children":["From the ",["$","strong",null,{"children":"Add new artifact dependency"}]," modal, we'll ensure that we depend on the ",["$","strong",null,{"children":"Build"}]," configuration, and in the ",["$","strong",null,{"children":"Artifact rules"}]," textbox, we'll enter ",["$","code",null,{"children":"**/*.*=>target"}]," which translates to copying the files found in the artifacts folder of the build configuration into the target folder in our current deploy configuration. Checking the ",["$","strong",null,{"children":"Clean destination paths before downloading artifacts"}]," checkbox ensures that no old files exist on file. Click on the ",["$","strong",null,{"children":"Save"}]," button to save these changes."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_xd9KpOnyXRYeka7pqBjYOw.png","alt":"","width":"543","height":"372"}]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["$","strong",null,{"children":"Hold up! What's the difference between finish build trigger v/s snapshot dependency v/s artifact dependency?"}]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":[["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.jetbrains.com/help/teamcity/artifact-dependencies.html","children":"Artifact dependency"}]," is just letting TeamCity know that build B needs artifacts from build A. It has nothing to do with how the build actually gets triggered."]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["If build B has a ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.jetbrains.com/help/teamcity/configuring-finish-build-trigger.html","children":"finish build trigger"}]," configured on build A, it means that after build A successfully runs, it will trigger build B. However, you can still trigger build B individually without triggering build A. This is great if you want to automate steps and not have manually trigger build B after build A has ran."]}]}],["$","blockquote",null,{"children":["$","p",null,{"children":["If build B has a ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.jetbrains.com/help/teamcity/snapshot-dependencies.html","children":"snapshot dependency"}]," configured on build A, it means that build B will not automatically get triggered after build A runs. But, if you trigger build B, it will check to see if build A needs to run and if does, it will first run build A and then run build B. Snapshot dependency helps form a build chain, and this is particularly useful to manage deployable units and rollbacks. Therefore, if a previously run build B is triggered again, it maintains the association of the build chain and gets the deployable code from build A (if build A was responsible for building the code and producing the artifact and build B was responsible for deploying the code) and deploys that version of the codebase instead of getting the last (and possibly latest) version of the codebase from build A."]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"secrets-and-variables","children":[["$","a",null,{"className":"break-words","href":"#secrets-and-variables","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Secrets and variables"]}],["$","p",null,{"children":["From the ",["$","strong",null,{"children":"Parameters"}]," page, click on the ",["$","strong",null,{"children":"Add new parameter"}]," button and then from the modal, let's type the parameter name as ",["$","code",null,{"children":"env.AZURE_CREDENTIALS"}]," and in the ",["$","strong",null,{"children":"Value"}]," field, type the client secret we saved earlier. Click on ",["$","strong",null,{"children":"Save"}],"."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_iSgEX5Eyrr-5k_z6z2SbZg.png","alt":"","width":"964","height":"550"}]}]}],["$","p",null,{"children":["Since this is a secret password, we can click on the ",["$","strong",null,{"children":"Edit"}]," button against the ",["$","strong",null,{"children":"Spec"}]," field and ensure that the ",["$","strong",null,{"children":"Type"}]," is set to ",["$","strong",null,{"children":"Password"}]," and the ",["$","strong",null,{"children":"Read-only"}]," checkbox is checked."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_4hTSJkkXgePOyd2JmrUQ-A.png","alt":"","width":"540","height":"488"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"build-steps","children":[["$","a",null,{"className":"break-words","href":"#build-steps","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Build steps"]}],["$","p",null,{"children":"Now it's time to add the actual steps that the deploy configuration will execute so that it can deploy the website. To do so, we'll need to add build steps. Yes, I know, it's called build steps even though it's for deployment, but that's just how TeamCity has named it!"}],["$","p",null,{"children":["Let's repeat the steps we did in the build configuration and add three command line build steps. We do this by clicking on the ",["$","strong",null,{"children":"Build Steps"}]," page and then clicking the ",["$","strong",null,{"children":"Add build step"}]," button."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_vOzkLHRqy3sHn2qpUnV1_A.png","alt":"","width":"998","height":"362"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"deploy-step-1-log-in-to-azure","children":[["$","a",null,{"className":"break-words","href":"#deploy-step-1-log-in-to-azure","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Deploy step #1: Log in to Azure"]}],["$","p",null,{"children":["The first step is for the TeamCity build runner to log in to the Azure account. We'll supply the command ",["$","code",null,{"children":"az login --service-principal -u <SERVICE PRINCIPAL ID> -p %env.AZURE_CREDENTIALS% --tenant <TENANT NAME>"}],". Replace ",["$","code",null,{"children":"<SERVICE PRINCIPAL ID>"}]," with the client ID we saved earlier and ",["$","code",null,{"children":"<TENANT NAME>"}]," with the Azure tenant name noted earlier in the command above. ",["$","code",null,{"children":"env.AZURE_CREDENTIALS"}]," will automatically get replaced with the secret configured previously."]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"deploy-step-2-upload-website-files","children":[["$","a",null,{"className":"break-words","href":"#deploy-step-2-upload-website-files","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Deploy step #2: Upload website files"]}],["$","p",null,{"children":["We'll then batch-upload the website files into the blob storage account using the command ",["$","code",null,{"children":"az storage blob upload-batch --account-name <STORAGE ACCOUNT NAME> -d $web -s ./target --auth-mode login"}],". Replace ",["$","code",null,{"children":"<STORAGE ACCOUNT NAME>"}]," with the actual storage account name created earlier."]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"deploy-step-3-log-out-of-azure","children":[["$","a",null,{"className":"break-words","href":"#deploy-step-3-log-out-of-azure","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Deploy step #3: Log out of Azure"]}],["$","p",null,{"children":["Tidy up and log out of Azure using the command ",["$","code",null,{"children":"az logout"}],"."]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"test-it-out","children":[["$","a",null,{"className":"break-words","href":"#test-it-out","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Test it out"]}],["$","p",null,{"children":["Click on the ",["$","strong",null,{"children":"Deploy"}]," button to execute the deploy configuration."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_sK_GWzhIGNBCmIGQZz-zMw.png","alt":"","width":"1143","height":"76"}]}]}],["$","p",null,{"children":["You can have a look at the ",["$","strong",null,{"children":"Build Log"}]," tab to see if the steps have been executed correctly."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_ogBuWXNZ0y5FEvZMhZP1Uw.png","alt":"","width":"802","height":"556"}]}]}],["$","p",null,{"children":"Once the deployment is complete, you can head over to the Azure storage account website URL to confirm that the website has been deployed successfully."}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_KMaOKaZHM-iZAv17BuKdVw.png","alt":"","width":"1302","height":"613"}]}]}],["$","h4",null,{"className":"content-header mt-8 mb-6","id":"viewing-the-build-chain","children":[["$","a",null,{"className":"break-words","href":"#viewing-the-build-chain","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Viewing the build chain"]}],["$","p",null,{"children":["Back in TeamCity, if you click on the project name from the sidebar, then from ",["$","strong",null,{"children":"More"}]," options if you click on ",["$","strong",null,{"children":"Build Chains"}],", TeamCity will redirect you to another page."]}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_5KX7phk3hfL3z85nwDSdGA.png","alt":"","width":"689","height":"321"}]}]}],["$","p",null,{"children":"Here, you can visually see the two configurations chained together and once they're running, you'll be able to also visually see which steps they're at and if one configuration is waiting for the other. If you click on the green play button on each configuration tile, you'll be able to execute that step specifically. This is particularly useful in terms of a rollback if you need to execute a step again to redeploy a previously deployed version of the website. Finally, if something goes wrong, you'll also be able to see them turning red and be able to click on the step to investigate the issue."}],["$","div",null,{"children":["$","div",null,{"children":["$","$L7",null,{"src":"/static/posts/1_JHD8eo-L3Ar4wkXfOZcioA.png","alt":"","width":"581","height":"392"}]}]}],["$","h3",null,{"className":"content-header mt-8 mb-6","id":"conclusion","children":[["$","a",null,{"className":"break-words","href":"#conclusion","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Conclusion"]}],["$","p",null,{"children":"As you might've observed, there are plenty of steps but they're mostly straightforward. The GUI is not very intuitive so some explanation is always needed before experimenting with something, so I'm hoping the above article will be useful for you. A parting tip would be to always have a test pipeline ready where you can experiment and learn and then once confident, you can apply the same changes in production."}],["$","p",null,{"children":"That's it. Thanks for reading."}]]}],["$","div",null,{"className":"pt-6 pb-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L17",null,{"slug":"smashing-out-a-build-and-deploy-pipeline-using-teamcity"}]}]]}],["$","$L18",null,{"content":"$c:1:props:children:1:props:children:0:props:content","authorDetails":[{"name":"Clyde D'Souza","avatar":"/static/images/clydedsouza.jpg","occupation":"Senior Software Engineer. Digital Content Creator.","bio":"Hi, I'm Clyde. I'm a software engineer and digital content creator based in Auckland, New Zealand. I write about various technologies, teach online classes, make videos, and I'm also the author of a children's bedtime storybook!","email":"address@yoursite.com","twitter":"https://twitter.com/clydedz","linkedin":"https://www.linkedin.com/in/clydedz/","github":"https://github.com/clydedz","kofi":"https://ko-fi.com/L3L026ITT","type":"Authors","readingTime":{"text":"1 min read","minutes":0.18,"time":10800,"words":36},"slug":"default","path":"authors/default","filePath":"authors/default.mdx","toc":[]}],"next":{"title":"ChatGPT and AI: Creating Magical Bedtime Stories for Kids — Part 1","date":"2023-05-24T00:00:00.000Z","tags":["ChatGPT","Artificial Intelligence","Bedtime Stories","Kindle Direct Publishing","Kdp"],"readingList":["Book Publishing Guide"],"lastmod":"2023-05-24T00:00:00.000Z","draft":false,"subtitle":"Part 1: A Step-by-Step Guide to Writing, Cover Designing, and Publishing a Children's Storybook with Artificial Intelligence on Your Side","images":["/static/posts/aitell1.png"],"type":"Blog","readingTime":{"text":"17 min read","minutes":16.055,"time":963300,"words":3211},"slug":"chatgpt-and-ai-creating-magical-bedtime-stories-for-kids-part-1","path":"posts/chatgpt-and-ai-creating-magical-bedtime-stories-for-kids-part-1","filePath":"posts/chatgpt-and-ai-creating-magical-bedtime-stories-for-kids-part-1.mdx","toc":[{"value":"Introduction","url":"#introduction","depth":3},{"value":"1. Generating stories using ChatGPT","url":"#1-generating-stories-using-chatgpt","depth":3},{"value":"Considerations","url":"#considerations","depth":4},{"value":"Admin tips","url":"#admin-tips","depth":4},{"value":"ChatGPT bonus","url":"#chatgpt-bonus","depth":4},{"value":"2. Creating a manuscript","url":"#2-creating-a-manuscript","depth":3},{"value":"Title page","url":"#title-page","depth":4},{"value":"Copyright page","url":"#copyright-page","depth":4},{"value":"Table of contents","url":"#table-of-contents","depth":4},{"value":"Preface","url":"#preface","depth":4},{"value":"Chapters","url":"#chapters","depth":4},{"value":"About the author","url":"#about-the-author","depth":4},{"value":"Considerations","url":"#considerations-1","depth":4},{"value":"3. Designing the book cover","url":"#3-designing-the-book-cover","depth":3},{"value":"Microsoft Designer","url":"#microsoft-designer","depth":4},{"value":"Canva","url":"#canva","depth":4},{"value":"Conclusion","url":"#conclusion","depth":3}],"structuredData":{"@context":"https://schema.org","@type":"BlogPosting","headline":"ChatGPT and AI: Creating Magical Bedtime Stories for Kids — Part 1","datePublished":"2023-05-24T00:00:00.000Z","dateModified":"2023-05-24T00:00:00.000Z","description":"Part 1: A Step-by-Step Guide to Writing, Cover Designing, and Publishing a Children's Storybook with Artificial Intelligence on Your Side","image":"/static/posts/aitell1.png","url":"https://blog.clydedsouza.net/posts/chatgpt-and-ai-creating-magical-bedtime-stories-for-kids-part-1","author":[{"@type":"Person","name":"Clyde D'Souza"}]}},"prev":{"title":"Build and Publish a Chrome Extension","date":"2022-10-23T00:00:00.000Z","tags":["Chrome Extension","Chrome","Programming","Google Chrome Extensions","Web Development"],"readingList":["Chrome Extensions"],"lastmod":"2022-10-23T00:00:00.000Z","draft":false,"subtitle":"Share your work with millions of users","images":["/static/posts/chromepsy.png"],"type":"Blog","readingTime":{"text":"12 min read","minutes":11.715,"time":702900,"words":2343},"slug":"build-and-publish-a-chrome-extension","path":"posts/build-and-publish-a-chrome-extension","filePath":"posts/build-and-publish-a-chrome-extension.mdx","toc":[{"value":"Introduction","url":"#introduction","depth":3},{"value":"High-level architecture","url":"#high-level-architecture","depth":3},{"value":"Chrome browser","url":"#chrome-browser","depth":4},{"value":"Webpage","url":"#webpage","depth":4},{"value":"APIs","url":"#apis","depth":4},{"value":"Extension","url":"#extension","depth":4},{"value":"In action: Overriding Chrome's new tab","url":"#in-action-overriding-chromes-new-tab","depth":3},{"value":"Manifest file","url":"#manifest-file","depth":4},{"value":"Overriding Chrome's new tab","url":"#overriding-chromes-new-tab","depth":4},{"value":"Creating the HTML file","url":"#creating-the-html-file","depth":4},{"value":"Testing it locally","url":"#testing-it-locally","depth":4},{"value":"Publishing your extension","url":"#publishing-your-extension","depth":4},{"value":"A complex scenario","url":"#a-complex-scenario","depth":3},{"value":"Automatic build and deployment","url":"#automatic-build-and-deployment","depth":4},{"value":"Using Chrome APIs","url":"#using-chrome-apis","depth":4},{"value":"Requesting permissions","url":"#requesting-permissions","depth":4},{"value":"Wait, it's not only Chrome","url":"#wait-its-not-only-chrome","depth":3}],"structuredData":{"@context":"https://schema.org","@type":"BlogPosting","headline":"Build and Publish a Chrome Extension","datePublished":"2022-10-23T00:00:00.000Z","dateModified":"2022-10-23T00:00:00.000Z","description":"Share your work with millions of users","image":"/static/posts/chromepsy.png","url":"https://blog.clydedsouza.net/posts/build-and-publish-a-chrome-extension","author":[{"@type":"Person","name":"Clyde D'Souza"}]}},"children":"$c:1:props:children:1:props:children:1:props:children:0:props:children:0:props:children"}]]}]]}]]}]]
11:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
e:null
f:null
13:[["$","title","0",{"children":"Smashing Out a Build and Deploy Pipeline Using TeamCity | Clyde's Blog"}],["$","meta","1",{"name":"description","content":"React JS + Azure Storage and CLI + Lots of TeamCity GUI"}],["$","meta","2",{"name":"robots","content":"index, follow"}],["$","meta","3",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","4",{"rel":"canonical","href":"https://blog.clydedsouza.net/posts/smashing-out-a-build-and-deploy-pipeline-using-teamcity"}],["$","link","5",{"rel":"alternate","type":"application/rss+xml","href":"https://blog.clydedsouza.net/feed.xml"}],["$","meta","6",{"property":"og:title","content":"Smashing Out a Build and Deploy Pipeline Using TeamCity"}],["$","meta","7",{"property":"og:description","content":"React JS + Azure Storage and CLI + Lots of TeamCity GUI"}],["$","meta","8",{"property":"og:url","content":"https://blog.clydedsouza.net/posts/smashing-out-a-build-and-deploy-pipeline-using-teamcity"}],["$","meta","9",{"property":"og:site_name","content":"Clyde's Blog"}],["$","meta","10",{"property":"og:locale","content":"en_US"}],["$","meta","11",{"property":"og:image","content":"https://blog.clydedsouza.net/static/posts/tcman.png"}],["$","meta","12",{"property":"og:type","content":"article"}],["$","meta","13",{"property":"article:published_time","content":"2023-03-30T00:00:00.000Z"}],["$","meta","14",{"property":"article:modified_time","content":"2023-03-30T00:00:00.000Z"}],["$","meta","15",{"property":"article:author","content":"Clyde D'Souza"}],["$","meta","16",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","17",{"name":"twitter:title","content":"Smashing Out a Build and Deploy Pipeline Using TeamCity"}],["$","meta","18",{"name":"twitter:description","content":"React JS + Azure Storage and CLI + Lots of TeamCity GUI"}],["$","meta","19",{"name":"twitter:image","content":"https://blog.clydedsouza.net/static/posts/tcman.png"}]]
